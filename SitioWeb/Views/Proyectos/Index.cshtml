@{
    ViewBag.Title = "Proyectos";
}

@Styles.Render("~/bundles/peicon7stroke/css")

<div class="normalheader transition animated fadeIn">
    <div class="hpanel">
        <div class="panel-body">
            <a class="small-header-action" href="">
                <div class="clip-header">
                    <i class="fa fa-arrow-up"></i>
                </div>
            </a>
            <div id="hbreadcrumb" class="pull-right m-t-lg">
                <ol class="hbreadcrumb breadcrumb">
                    @*<li><a href="@Url.Action("Index", "Dashboard")">Dashboard</a></li>*@
                    <li>
                        <span>Proyectos</span>
                    </li>
                    <li class="active">
                        <span>Proyectos</span>
                    </li>
                </ol>
            </div>
            <h2 class="font-light m-b-xs">
                Listado de Proyectos
            </h2>
            <small>Listado de proyectos</small>
        </div>
    </div>
</div>

<div class="content animate-panel">

    <div id="proyectos"></div>
</div>

<ol class="round">
    <li class="one">
        <h2>Listado de Proyectos</h2><br />
        <div id="contenedorProyectos"></div>
    </li>
    <li class="two">
        <h2>Documentación</h2><br />
        Listado de proyectos de la División Tecnología y Negocios.
        <br />
        <br />
        <p>Versiones:</p>
        <table>
            <tr>
                <td>Versión</td>
                <td>Fecha</td>
                <td>Cambio</td>
            </tr>
            <tr>
                <td>v0.0.1</td>
                <td>02-04-2015</td>
                <td>Se agrega funcionalidad para visualizar el listado de proyectos de la División de Tecnología y Negocios.</td>
            </tr>
        </table>

        <br />

        <p>Futuras Versiones:</p>

        <ol>
            <li>
                Hacer dinámica la carga de la información de cada proyecto.
            </li>
            <li>
                Formulario de ingreso de la información, o ver la posibilidad de alimentar la información desde TFS o Intranet.
            </li>
        </ol>
    </li>
</ol>

@Scripts.Render("~/bundles/jquery/js")
@Scripts.Render("~/bundles/handlebars/js")

<script type="text/javascript">
    $(function () {
        var data = {
            proyectos: [{
                id: "1",
                nombre: "Nueva Home",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "Javier Saavedra",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Sebastian del Villar",
                    imagen: "sebastian_del_villar.jpg"
                },
                lt: {
                    nombre: "Oscar Osses",
                    imagen: "oscar_osses.jpg"
                },
                desarrolladores: [{
                    nombre: "Maximiliano Henrriquez",
                    imagen: "maximiliano_henriquez.png"
                }, {
                    nombre: "Pedro Barreaux",
                    imagen: "pedro_barreaux.jpg"
                }]
            },
            {
                id: "2",
                nombre: "Servicio al Usuario",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "10",
                jp: {
                    nombre: "Alex Aedo",
                    imagen: "alex_aedo.jpg"
                },
                lt: {
                    nombre: "Andres Castro",
                    imagen: "andres_castro.jpg"
                },
                desarrolladores: [{
                    nombre: "Michael García",
                    imagen: "seidor.png"
                }, {
                    nombre: "Juan Peña",
                    imagen: "juan_pena.jpg"
                }]
            },
            {
                id: "3",
                nombre: "Nuevo ChileCompra",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Alvaro Cañon",
                    imagen: "alvaro_canon.jpg"
                },
                lt: {
                    nombre: "Andres Castro",
                    imagen: "andres_castro.jpg"
                },
                desarrolladores: []
            },
            {
                id: "4", nombre: "Sigfe 2",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Rodrigo Robles",
                    imagen: "rodrigo_robles.jpg"
                },
                lt: {
                    nombre: "Fabian Luco",
                    imagen: "fabian_luco.jpg"
                },
                desarrolladores: []
            },
            {
                id: "5",
                nombre: "Ley del Lobby",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "100",
                jp: {
                    nombre: "Alejandro Gonzalez",
                    imagen: "alejandro_gonzalez.jpg"
                },
                lt: {
                    nombre: "Fabian Luco",
                    imagen: "fabian_luco.jpg"
                },
                desarrolladores: [{
                    nombre: "Michael García",
                    imagen: "seidor.png"
                }]
            },
            {
                id: "6",
                nombre: "Plan de Compras Fase 2",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Daniel Marambio",
                    imagen: "daniel_marambio.jpg"
                },
                lt: {
                    nombre: "Jose Ortega",
                    imagen: "jose_ortega.jpg"
                },
                desarrolladores: []
            },
            {
                id: "7",
                nombre: "Migración de ChilePaga (ETL)",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Sebastián del Villar",
                    imagen: "sebastian_del_villar.jpg"
                },
                lt: {
                    nombre: "Andres Castro",
                    imagen: "andres_castro.jpg"
                },
                desarrolladores: [{
                    nombre: "José Bascuñan",
                    imagen: "jose_bascunan.jpg"
                }]
            },
            {
                id: "8",
                nombre: "Migración de ChilePaga (Sitio Web)",
                descripcion: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.",
                sponsor: "No definido",
                impacto: "Medio",
                riesgo: "Bajo",
                complejidad: "Alta",
                avance: "60",
                jp: {
                    nombre: "Sebastián del Villar",
                    imagen: "sebastian_del_villar.jpg"
                },
                lt: {
                    nombre: "Oscar Osses",
                    imagen: "oscar_osses.jpg"
                },
                desarrolladores: [{
                    nombre: "Michael García",
                    imagen: "seidor.png"
                }, {
                    nombre: "Pedro Barreaux",
                    imagen: "pedro_barreaux.jpg"
                }, {
                    nombre: "Juan Licanqueo",
                    imagen: "juan_licanqueo.jpg"
                }, {
                    nombre: "Maximiliano Henrriquez",
                    imagen: "maximiliano_henriquez.png"
                }]
            }]
        };

        var source = $("#ProyectosTemplate").html();
        var template = Handlebars.compile(source);
        $("#contenedorProyectos").html(template(data));

        var source = $("#tmpl").html();
        var template = Handlebars.compile(source);
        $("#proyectos").html(template(data.proyectos));

    });

    Handlebars.registerHelper('grouped_each', function (every, context, options) {
        var out = "", subcontext = [], i;
        if (context && context.length > 0) {
            for (i = 0; i < context.length; i++) {
                if (i > 0 && i % every === 0) {
                    out += options.fn(subcontext);
                    subcontext = [];
                }
                subcontext.push(context[i]);
            }
            out += options.fn(subcontext);
        }
        return out;
    });
</script>

<script type="text/x-handlebars-template" id="ProyectosTemplate">
    <div class="panel-group proyecto lazul" id="accordion" role="tablist" aria-multiselectable="true">
        {{#each proyectos}}
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="heading_{{id}}">
                <div class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse_{{id}}" aria-expanded="true" aria-controls="collapse_{{id}}" style="text-decoration: none;">
                        {{nombre}}
                        <span style="float: right;">
                            <img src="../Images/equipo/{{jp.imagen}}" title="{{jp.nombre}}" height="28" width="28" alt="{{jp.nombre}}" class="img-circle">
                            <img src="../Images/equipo/{{lt.imagen}}" title="{{lt.nombre}}" height="28" width="28" alt="{{lt.nombre}}" class="img-circle">
                            {{#each this.desarrolladores}}
                            <img src="../Images/equipo/{{imagen}}" title="{{nombre}}" height="28" width="28" alt="{{nombre}}" class="img-circle">
                            {{/each}}
                        </span>
                    </a>
                </div>
            </div>
            <div id="collapse_{{id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading_{{id}}">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <h4>Objetivo Estratégico</h4>
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce condimentum vulputate diam ac tincidunt. Curabitur nec tristique urna. Integer luctus libero euismod nisl elementum maximus at nec ex. Duis in fermentum lacus. Etiam sit amet elementum nibh, at fermentum lacus. Pellentesque posuere fringilla volutpat. Curabitur nec blandit est. Vestibulum condimentum est non neque varius, quis condimentum neque ultrices. Maecenas ultricies sodales purus a porttitor. Donec tempor ultrices quam, a convallis nunc varius nec. Vestibulum ullamcorper quam a turpis pretium, eget lobortis tortor ultricies.
                            </p>
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="project-label">SPONSOR</div>
                                    <small>{{sponsor}}</small>
                                </div>
                                <div class="col-sm-2">
                                    <div class="project-label">IMPACTO</div>
                                    <small>{{impacto}}</small>
                                </div>
                                <div class="col-sm-2">
                                    <div class="project-label">RIEGO</div>
                                    <small>{{riesgo}}</small>
                                </div>
                                <div class="col-sm-2">
                                    <div class="project-label">COMPLEJIDAD</div>
                                    <small>{{complejidad}}</small>
                                </div>
                                <div class="col-sm-3">
                                    <div class="project-label">AVANCE</div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="10" aria-valuemin="10" aria-valuemax="100" style="width: {{avance}}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</script>

<script type="text/x-handlebars-template" id="tmpl">
    <div class="panel-group proyecto lazul" id="accordion" role="tablist" aria-multiselectable="true">
        {{#grouped_each 2 .}}
        <div class="row projects">
            {{#each this}}
            <div class="col-lg-6">
                <div class="hpanel hgreen">
                    <div class="panel-body">
                        <span class="label label-success pull-right">NEW</span>
                        <div class="row">
                            <div class="col-sm-8">
                                <h4>{{nombre}}</h4>

                                <p>
                                    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has..
                                </p>

                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="project-label">SPONSOR</div>
                                        <small>{{sponsor}}</small>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="project-label">IMPACTO</div>
                                        <small>{{impacto}}</small>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="project-label">RIESGO</div>
                                        <small>{{riesgo}}</small>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="project-label">COMPLEJIDAD</div>
                                        <small>{{complejidad}}</small>
                                        @*<div class="progress m-t-xs full progress-small">
                                                <div style="width: 12%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="12" role="progressbar" class=" progress-bar progress-bar-success">
                                                </div>
                                            </div>*@
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 project-info">
                                <div class="project-action m-t-md">
                                    <div class="btn-group">
                                        <button class="btn btn-xs btn-default"> View</button>
                                        <button class="btn btn-xs btn-default"> Edit</button>
                                        <button class="btn btn-xs btn-default"> Delete</button>
                                    </div>
                                </div>
                                <div class="project-value">
                                    <h2 class="text-success">
                                        $1 206,40
                                    </h2>
                                </div>
                                <div class="project-people">
                                    <img alt="{{jp.nombre}}" class="img-circle" src="Images/equipo/{{jp.imagen}}" title="{{jp.nombre}}" height="28" width="28">
                                    <img alt="{{lt.nombre}}" class="img-circle" src="Images/equipo/{{lt.imagen}}" title="{{lt.nombre}}" height="28" width="28">
                                    {{#each this.desarrolladores}}
                                    <img alt="{{nombre}}" class="img-circle" src="Images/equipo/{{imagen}}" title="{{nombre}}" height="28" width="28">
                                    {{/each}}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel-footer">
                        <a href="@Url.Action("Detalles", "Proyectos")">
                            Haga clic aquí para ver mayor información del proyecto.
                        </a>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>

        {{/grouped_each}}
    </div>
</script>